.race{id: "#{race.state_code}-#{race.party_id}", 'data-party-id': race.party_id, 'data-state-code': race.state_code, class: "#{race.when_race_happens} #{race.has_delegate_counts && 'has-delegate-counts' || ''} #{race.any_precincts_reporting? ? '' : 'no-'}precincts-reporting"}
  %h3.race-name= race.title
  .race-status
    .status-past
      %p All precincts reporting
      %p
        Last updated:
        %time{datetime: race.last_updated.nil? ? '' : format_datetime(race.last_updated)}
    .status-present
      %button.refresh 0:30
      %p.n-precincts-reporting &nbsp;
    .status-future= race.results_coming_s
  %p.text= race.text # may be nil, but we still put the <p> so we can line up the Dem and GOP <p>s
  .party-state-map
    != map_svg("states/#{race.state_code}")
    != render(partial: 'race-day/race-map-legend', locals: { party: race.party })
  != render(partial: 'race-day/race-candidates', locals: { race: race })

  .n-delegates.n-delegates-with-candidates
    .dots!= race_assigned_unassigned_delegates_dot_groups(race).to_html
    %p
      %span.n-delegates-with-candidates-int= format_int(race.n_delegates_with_candidates)
      of
      %span.n-delegates-int= format_int(race.n_delegates)
      delegates accounted for in #{race.state_name}.
    %p
      HuffPost counts unpledged delegates who have publicly stated their intent to vote for a candidate.
      %a{href: '/2016/primaries/about-delegates'} More info &raquo;
