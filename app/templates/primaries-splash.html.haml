!!! 5
%html{lang: 'en'}
  %head
    %meta{charset: 'utf-8'}
    %title Huffington Post 2016 Primaries Results Splash
    %link{rel: 'stylesheet', href: '/2016/stylesheets/proxima-nova-condensed.css'}
    %link{rel: 'stylesheet', href: asset_path('splash.css')}

%body{class: "race-day-#{race_day.when_race_day_happens}"}
  %div.primary-splash-banner
    .header
      .line
      .hed
        %h1.main-hed.when-present= "LIVE RESULTS: #{race_day.title}"
        %h1.main-hed.when-past= "RESULTS: #{race_day.title}"
        %h1.main-hed.when-future= "HAPPENING TONIGHT: #{race_day.title}"
      .line
    .flex-container
      .race-progress-container.flex-container
        .legend-labels-container
          .reporting
            %span#precincts-reporting-val= "100%"
            %span= " OF PRECINCTS REPORTING"
          .updating
            %span= "UPDATING IN: "
            %span.icon
            %span.timer= "0:30"
          .tease-link
            %a{target: '_blank', href: "/2016/primaries/2016-02-09"} See Results
          .legend
            .label= "TOWNS REPORTING"
            .container
              .finished
              %div
                %span#counties-val= "0 FINISHED"
            .container
              .unfinished
              %div
                %span#unreported-counties
                0 NOT FINISHED
        .map-container
          .map
            != map_svg('states/NH') 
      -race_day.state_party_races.first[1].each do |party, race, _|
        .party-container{class: party.id}
          .candidate-row-container{class: party.id}
            .leading-candidate-img
              %img{src: image_path("#{party.name.downcase}.svg"), alt: ''}
            .leading-candidate-delegates.left
              .frontrunner-lbl
                %span= party.adjective.upcase
                %span CANDIDATES
                %span Total Votes
          .candidate-position-listing
            - race.candidate_races[0..2].each do |candidate_race|
              - candidate = candidate_race.candidate
              %table.candidate{'data-candidate-id': candidate.id, class: "#{candidate_race.winner? ? 'winner' : ''} #{candidate_race.leader? ? 'leader' : ''}"}
                %tbody
                  %tr
                    %td.candidate-name= candidate.name
                    %td.n-votes= format_int(candidate_race.n_votes)
                    %td.n-votes-pct= "#{format_percent_or_nil(candidate_race.percent_vote)}%"
            -if party.id == "GOP"
              .see-all-candidates
                %a{target: '_blank', href: "/2016/primaries/2016-02-09"} See all candidates
        .map-container{class: "#{party.id.downcase}"}
          .map
            != map_svg('states/NH')
          .legend
            .container
              .leading
              %div
                %span= "#{race.candidate_races.first.candidate.name.upcase} LEADS"
            .container
              .trailing
              %div
                %span= "#{race.candidate_races.first.candidate.name.upcase} TRAILS"
            .container
              .unfinished
              %div
                %span= "NOT FINISHED REPORTING"
                


  %script{:type => "text/javascript", :src => "/2016/javascripts/pym.min.js"}
  %script
    new pym.Child();
  %script{src: asset_path('splash.js'), async: true}
  %script{src: asset_path('ga.js')}
  %script{src: asset_path('stats.js')}
