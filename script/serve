#!/usr/bin/env ruby

require 'webrick'

require_relative '../lib/paths'

# Serve "x.html" as just "x"
class FileHandler < WEBrick::HTTPServlet::FileHandler
  def search_file(req, res, basename)
    if file = super
      file
    else
      super(req, res, "#{basename}.html")
    end
  end
end

server = WEBrick::HTTPServer.new(Port: 3000)
server.mount('/', FileHandler, Paths.Dist)
trap("INT") { server.shutdown }
server.start
